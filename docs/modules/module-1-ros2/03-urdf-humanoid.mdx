---
sidebar_label: 'URDF Basics for Humanoid Robots'
sidebar_position: 3
---

# URDF Basics for Humanoid Robots

## Introduction

Unified Robot Description Format (URDF) is an XML-based format used in ROS to describe robot models. For humanoid robots, URDF defines the physical structure, kinematic relationships, and visual properties. This chapter covers the fundamentals of URDF with a focus on humanoid robot applications.

## Understanding URDF Structure

A URDF file describes a robot as a collection of links connected by joints. The basic structure includes:

- **Links**: Rigid bodies with physical properties
- **Joints**: Connections between links with kinematic properties
- **Visual**: How the robot appears in simulation
- **Collision**: How the robot interacts physically
- **Inertial**: Mass properties for physics simulation

## Basic URDF Elements

### Link Definition

A link represents a rigid body in the robot:

```xml
<link name="link_name">
  <inertial>
    <mass value="1.0"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
  </inertial>
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="1 1 1"/>
    </geometry>
    <material name="blue">
      <color rgba="0 0 1 1"/>
    </material>
  </visual>
  <collision>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="1 1 1"/>
    </geometry>
  </collision>
</link>
```

### Joint Definition

Joints connect links and define their movement:

```xml
<joint name="joint_name" type="revolute">
  <parent link="parent_link"/>
  <child link="child_link"/>
  <origin xyz="0 0 0.1" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <limit lower="-1.57" upper="1.57" effort="100" velocity="1"/>
</joint>
```

## Humanoid Robot Skeleton

A humanoid robot typically includes these main components:

- **Torso**: Main body with head, arms, and legs attached
- **Head**: With sensors like cameras and IMU
- **Arms**: Shoulders, elbows, wrists, and hands
- **Legs**: Hips, knees, ankles, and feet

### Example Humanoid URDF Fragment

```xml
<?xml version="1.0"?>
<robot name="humanoid_robot">
  <!-- Base Link -->
  <link name="base_link">
    <inertial>
      <mass value="10.0"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <!-- Torso -->
  <link name="torso">
    <inertial>
      <mass value="5.0"/>
      <origin xyz="0 0 0.3"/>
      <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.5" iyz="0.0" izz="0.3"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.3"/>
      <geometry>
        <capsule radius="0.15" length="0.4"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.3"/>
      <geometry>
        <capsule radius="0.15" length="0.4"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint connecting base to torso -->
  <joint name="base_to_torso" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.1" rpy="0 0 0"/>
  </joint>

  <!-- Head -->
  <link name="head">
    <inertial>
      <mass value="2.0"/>
      <origin xyz="0 0 0.1"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.02"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.1"/>
      <geometry>
        <sphere radius="0.1"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.1"/>
      <geometry>
        <sphere radius="0.1"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint connecting torso to head -->
  <joint name="torso_to_head" type="revolute">
    <parent link="torso"/>
    <child link="head"/>
    <origin xyz="0 0 0.5" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.5" upper="0.5" effort="10" velocity="1"/>
  </joint>
</robot>
```

## Joint Types for Humanoid Robots

### Revolute Joints
Allow rotation around a single axis - ideal for:
- Shoulder joints (pitch, roll, yaw)
- Elbow joints (flexion/extension)
- Knee joints (flexion/extension)
- Hip joints (multiple axes)

### Continuous Joints
Like revolute joints but without limits - useful for:
- Rotating joints that need full rotation
- Continuous rotation wheels

### Prismatic Joints
Allow linear motion - used for:
- Linear actuators
- Telescoping mechanisms

### Fixed Joints
Connect links without allowing motion - used for:
- Attaching sensors
- Connecting rigid components

## Visual and Collision Properties

### Geometry Types

URDF supports several geometry types:

```xml
<!-- Box -->
<geometry>
  <box size="0.1 0.2 0.3"/>
</geometry>

<!-- Cylinder -->
<geometry>
  <cylinder radius="0.1" length="0.2"/>
</geometry>

<!-- Sphere -->
<geometry>
  <sphere radius="0.1"/>
</geometry>

<!-- Mesh -->
<geometry>
  <mesh filename="package://robot_description/meshes/link.stl"/>
</geometry>
```

### Materials

Materials define the visual appearance:

```xml
<material name="red">
  <color rgba="1 0 0 1"/>
</material>
<material name="blue">
  <color rgba="0 0 1 1"/>
</material>
<material name="green">
  <color rgba="0 1 0 1"/>
</material>
```

## Inertial Properties

Inertial properties are crucial for physics simulation:

```xml
<inertial>
  <mass value="1.0"/>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
</inertial>
```

For simple shapes, you can calculate inertial properties:
- Box: Ixx = m/12 * (h² + d²), Iyy = m/12 * (w² + d²), Izz = m/12 * (w² + h²)
- Cylinder: Ixx = Iyy = m/12 * (3r² + h²), Izz = m/2 * r²
- Sphere: Ixx = Iyy = Izz = 2/5 * m * r²

## Gazebo Integration

To use URDF in Gazebo, add Gazebo-specific tags:

```xml
<gazebo reference="link_name">
  <material>Gazebo/Blue</material>
  <mu1>0.9</mu1>
  <mu2>0.9</mu2>
</gazebo>

<gazebo>
  <plugin name="robot_state_publisher" filename="libgazebo_ros_robot_state_publisher.so">
    <tf_prefix>robot</tf_prefix>
  </plugin>
</gazebo>
```

## Humanoid-Specific Considerations

### Balance and Stability
- Center of mass should be low and within the support polygon
- Proper weight distribution between upper and lower body
- Appropriate foot size for stability

### Degrees of Freedom
- Humanoid robots typically have 20-30+ degrees of freedom
- Each joint adds complexity to control algorithms
- Consider underactuated vs. fully actuated designs

### Sensor Integration
- Cameras in the head for vision
- IMU in the torso for balance
- Force/torque sensors in feet and hands
- Joint position/velocity/torque sensors

## URDF Tools and Validation

### xacro
xacro is a macro language that simplifies complex URDF files:

```xml
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid">
  <xacro:property name="M_PI" value="3.1415926535897931" />

  <xacro:macro name="simple_link" params="name mass xyz">
    <link name="${name}">
      <inertial>
        <mass value="${mass}"/>
        <origin xyz="${xyz}"/>
        <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
      </inertial>
    </link>
  </xacro:macro>

  <xacro:simple_link name="my_link" mass="1.0" xyz="0 0 0"/>
</robot>
```

### Validation
Always validate your URDF:
- Check for proper XML syntax
- Verify all links are connected
- Ensure joint limits are reasonable
- Validate inertial properties

## Best Practices

- Use consistent naming conventions
- Start with simple models and add complexity gradually
- Validate URDF with tools like `check_urdf`
- Use xacro for complex robots to avoid duplication
- Consider the physics implications of your design
- Test in simulation before building physical robots
- Document your URDF structure for maintainability

## RAG Summary

URDF (Unified Robot Description Format) is an XML-based format for describing robot models in ROS. For humanoid robots, it defines links (rigid bodies) connected by joints with specific kinematic properties. Key elements include links with inertial, visual, and collision properties, and joints that define movement between links. Proper URDF design is crucial for accurate physics simulation and robot control in humanoid applications.

## Knowledge Check

1. What are the main components of a URDF file?
2. What is the difference between visual and collision properties in URDF?
3. What are the different joint types available in URDF?
4. How do you define inertial properties for a robot link?
5. What is xacro and why is it useful for complex URDFs?